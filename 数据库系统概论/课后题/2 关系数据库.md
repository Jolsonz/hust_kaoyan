[TOC]

第2章 关系数据库

### 1 ．试述关系模型的三个组成部分。

答：关系模型由**关系数据结构**、**关系操作集合**和**关系完整性约束**三部分组成。典型的数据模型三要素。

 

### 2 ．试述关系数据语言的特点和分类。

答：关系数据语言可以分为三类：

1. 关系代数语言。
2. 关系演算语言：元组关系演算语言`ALPHA`和域关系演算语言`QBE`。==（演算语言不考）==
3. 具有关系代数和关系演算双重特点的语言：SQL

这些关系数据语言的共同特点是：

​	语言具有**完备的表达能力**，是非过程化的集合操作语言，功能强，能够嵌入高级语言中使用。

### 3.定义并理解下列术语:arrow_up_small:

---

域：一组具有相同数据类型的**值的集合**（可以理解成取值范围）

笛卡尔积：给定一组域 D1,D2,...Dn。允许其中有些域是有相同的，其笛卡尔积为D1×D2×...×Dn

==关系==：在域D1,D2,....Dn上笛卡尔积D1×D2×...×Dn的==子集==称为关系，表示为R(D1,D2,....Dn)

元组：关系中的每个元素是关系中的元组

属性：每列的名字

---

关系模式：**关系的描述称为关系模式**，形式化的表示为R(U,D,DOM,F)

关系：上面也有讲

> 另一种解释：**关系是关系模式在某一时刻的状态或内容**，关系模式是静态的，稳定的，关系是动态的，变化的。因为关系操作在不断的更新数据库中的数据

关系数据库：关系模式在某一时刻对应的关系的集合，即关系数据库。

---

另外：关系模式是型，关系是值

Student(sno,sname)是关系模式，以他为属性的表，即某一个时刻关系模式的值

### 4 ．试述关系模型的完整性规则。在参照完整性中，为什么外部码属性的值也可以为空？什么情况下才可以为空？

答：

**实体完整性**规则是指若属性A是基本关系R的**主属性**，则属性A不能取空值。

若属性(或属性组)F是基本关系R的**外码**，它与基本关系S的主码Ks相对应(基本关系R和S不一定是不同的关系)，则对于R中每个元组在F上的值必须为：

1. 或者**取空值(F的每个属性值均为空值)**；
2. 或者等于S中某个元组的主码值。即属性F本身不是主属性，则可以取空值，否则不能取空值。

 

### 5．设有一个SPJ数据库，包括S，P，J，SPJ四个关系模式：

∞代表自然连接符号。

1）求供应工程J1零件的供应商号码SNO：

​	π<sub>Sno</sub>(σ<sub>Jno=‘J1’</sub>（SPJ) )

2）求供应工程J1零件P1的供应商号码SNO：

​	π<sub>Sno</sub>(σ<sub>Jno=‘J1’∧Pno=‘P1‘</sub>(SPJ))    到sql里就不用 ^ 用 and了。

3）求供应工程J1零件为红色的供应商号码SNO：

​	π<sub>Sno</sub>(σ<sub>Jno=‘J1‘ </sub>（σ<sub>COLOR=’红‘ </sub>（P) ∞SPJ）)  

另外答案为：

​	π<sub>Sno</sub>（π<sub>Sno,Pno</sub>（σ<sub>Jno=‘J1‘ </sub>(SPJ))∞π<sub>Pno</sub>（σ<sub>COLOR=’红‘ </sub>（P）)   ）

> <u>上面这个地方最后投影为何要分两步</u>？可能有重复的？我觉得不需要分两步吧，但这是书上的标志答案。

4）求**没有使用天津**供应商生产的**红色**零件的工程号**JNO**：

​	π<sub>Jno</sub>(J) - π<sub>Jno</sub>（σ<sub>city=‘天津’∧Color=‘红‘ </sub>（S∞SPJ∞P）

> 没有使用，意思就是用减法。
>
> 先把供应情况，零件，供应商三个表连起来，选择其中红色，切城市为天津的。
>
> 然后SPJ中的减去它，就是了。
>
> 当然，应该也可以先选择，后连接。
>
> ​	π<sub>Jno</sub>(J) - π<sub>Jno</sub>（π~Sno~ (σ~city=‘天津’~(S)) ∞ π~Sno,Pno,Jno~(SPJ) ∞ π<sub>Pno</sub> (σ~color='红'~(P) )  )
>
> 上面是书上的答案，我觉得完全可以改成
>
> π<sub>Jno</sub>(J) - π<sub>Jno</sub>（π~Sno~ (σ~city=‘天津’~(S)) ∞ (SPJ) ∞ π<sub>Pno</sub> (σ~color='红'~(P) )  )
>
> 那个spj不需要选择也没啥吧。

5）求**至少用了供应商S1所供应的全部零件**的工程号JNO：

​	π<sub>Jno，==Pno==</sub>(SPJ)  ÷ π<sub>Pno</sub>（σ<sub>Sno=‘S1‘ </sub>（SPJ））

> 这个问法一看就是用除法，可参考书P63
>
> 先找出供应商S1所供应的全部零件 π<sub>Pno</sub>（σ<sub>Sno=‘S1‘ </sub>（SPJ））
>
> 然后除了之后只剩下满足条件的Jno。
>
> 这个操作全在SPJ表内
>
> 注意那个Pno不能忘记哦

 

### 6．试述等值连接与自然连接的区别和联系。

答：

连接运算符是“=”的连接运算称为等值连接。它是从关系R与S的广义笛卡尔积中选取A，B属性值相等的那些元组（然后会有重复的列，比如S.B, H.B这样的两列，实际上是一样的）

自然连接是一种特殊的等值连接，它要求两个关系中进行比较的分量必须是相同的属性组，并且在**结果中把重复的属性列去掉。**

 

### 7．关系代数的基本运算有哪些 ? 如何用这些基本运算来表示其他运算? 

答：**并、差、笛卡尔积、投影和选择**5种运算为基本的运算。其他3种运算，即**交、连接和除**，均可以用这5种基本运算来表达。

![image-20200411232302789](Picture/image-20200411232302789.png)